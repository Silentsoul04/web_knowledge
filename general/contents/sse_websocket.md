# Server-Sent Events & WebSocket

* Both technologies are capable of pushing data to browsers.
* They are not comparable techs.
* WebSocket become more popular.


## Server-Sent Event

* a web app "subscribes" to a stream of updates generated by a server and, whenever a new event occurs, a notification is sent to the client.

* Originally, web developer use polling or long polling to receive updated data from server. However, polling may cause http overhead and long-polling need some hack solutions. Therefore, here comes to the SSE which is built from scratch for receiving data from server. SSS is handled by browser and user only need to listen to the event. (You only need to work on event handler)

### Feature
* Can Only push data to browser.
* Simple.
* Server to Browser.
* Sent over traditional HTTP.

### Benefit
* Backend implementation is easier with the SSE protocol.
* Can be [polyfilled](https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-Browser-Polyfills) into older browsers.
* Since it use HTTP protocol, the back-end Server is easy to implement. (Simpler protocol)
* No need custom protocol.
* Automatic reconnection which websocket dose not has.
* Event IDs
* Ability to send arbitrary event.s


### Flaw
* Limited number of open connections.
  * limit is per browser, so you can only open few tabs.
* Only transmit [UTF-8](https://www.w3schools.com/charsets/ref_html_utf8.asp).

### Example:
* Stock quotes.
* Twitters updating feed.
* News Notification.

### Note
* How to implement bio-directional chat app with Server-Sent Event.
  1. App subscribe to a stream updates of server to receive events.
  2. App-Server middleware subscribe to redis database.
  3. App-Server notice some changes in databse and send eveent to subscribers.
  4. Client send data to server by XMLHttpRequest.


## WebSocket

### Feature
* WebSocket connection can both send and receive data from browser.
* Browser -> Server -> Browser.

### Benefit
* Transmit both [UTF-8](https://www.w3schools.com/charsets/ref_html_utf8.asp) and Binary data.
* Bi-directional communication.
* Real Time communication.

### Flaw
* Need a websocket server to handle the protocol.

### Example:
  * Chat Application.


## XMLHttpRequest

## To Do
* [Webpsocket - html5 Rockets - ???](https://www.html5rocks.com/en/tutorials/websockets/basics/)
* **Service Worker**
* [Fetch API](https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)
* [Cache API](https://developer.mozilla.org/en-US/docs/Web/API/Cache)
*

## References
[SSE VS. Websocket](https://stackoverflow.com/questions/5195452/websockets-vs-server-sent-events-eventsource)
[SSE - html5Rocks - Eric Bidleman](https://www.html5rocks.com/en/tutorials/eventsource/basics/)
